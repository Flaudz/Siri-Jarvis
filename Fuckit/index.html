<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>


        let id = "010686278768473536409:lrre8ejoppw";
        let key = "AIzaSyB4GKJQeKrp7yC7M3twHxhgETNkWE8oaAo";
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.start();

        recognition.onresult = (event) => {
	    const current = event.resultIndex;

	    const transcript = event.results[current][0].transcript.toLowerCase();
	    console.log(transcript);
	    readOutLoud(transcript);
    };

    recognition.onend = () => {
	    recognition.start();
    };

    const readOutLoud = (message) => {
            const first2wordsarray = message.split(" ");
            const checkText = first2wordsarray[0] + " " + first2wordsarray[1];
            const input = message;
            if(checkText == "what is"){
                $.get(`https://www.googleapis.com/customsearch/v1?key=${key}&cx=${id}&q=${input}`, function(data){
                    const speech = new SpeechSynthesisUtterance();
                    speech.text = data.items[0].snippet; // Her skal du erstatte denne kommentar med speech.text = Hvad du gerne vil have den siger;
                    speech.volume = .6;
                    speech.rate = 1;
                    speech.pitch = 1;

                    window.speechSynthesis.speak(speech);
                    console.log(data);
                })
            };
        }
            

        // Getting the information

    </script>
</body>
</html>